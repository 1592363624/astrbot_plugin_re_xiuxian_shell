# astrbot_plugin_re_xiuxian_shell
重生之凡人修仙传

## 简介

这是一个基于 AstrBot 框架的修仙游戏插件，允许用户在聊天平台中体验修仙的乐趣。玩家可以检测灵根、修炼、加入宗门、与其他玩家斗法等。

## 功能特性

1. **灵根检测** - 每个玩家都有独特的灵根属性
2. **修炼系统** - 闭关修炼提升修为
3. **境界系统** - 从凡人开始逐步提升到更高境界
4. **宗门系统** - 加入或创建宗门，参与宗门活动
5. **物品系统** - 获取和使用各种修仙物品
6. **斗法系统** - 与其他玩家进行修为比拼
7. **排行榜** - 查看修为和战斗排行榜

## 使用说明

### 基础命令

- `检测灵根` - 开启修仙之路，从凡人晋升为初始境界修仙者
- `我的灵根` - 查看自己的修仙档案（如果正在闭关，会显示闭关结果）
- `闭关修炼` - 开始闭关修炼，需要等待配置的时间完成，完成后会自动提醒
- `深度闭关` - 开启自动挂机修炼
- `查看闭关` - 查看深度闭关剩余时间
- `强行出关` - 提前结束深度闭关
- `避世` - 开启和平模式，无法被攻击
- `入世` - 关闭和平模式，重新参与争斗

### 宗门命令

- `拜入宗门 <宗门名>` - 尝试加入一个宗门
- `我的宗门` - 查看当前所属宗门信息
- `叛出宗门` - 脱离当前宗门
- `宗门点卯` - 每日点卯领取贡献

### 背包与物品命令

- `储物袋` - 查看拥有的所有物品
- `服用 <丹药名>[*数量]` - 使用储物袋中的丹药，可指定数量
- `炼制` - 炼制已学会的丹药或法宝（开发中）
- `学习` - 学习配方（开发中）
- `赠送` - 将物品赠送给其他道友（开发中）

### 斗法命令

- `斗法 @对手` - 与其他修士斗法（开发中）
- `修为榜` - 查看修为排行榜
- `恶人榜` - 查看恶人排行榜

## 更新日志


### v0.0.1
- 修复了闭关修炼完成后不会自动提醒的问题
- 优化了闭关状态的管理机制
- 增强了系统稳定性

## 数据库优化

本插件使用 SQLite 数据库并进行了以下优化：

1. **WAL 模式** - 启用 Write-Ahead Logging 模式，提高并发读写性能
2. **索引优化** - 为常用查询字段创建索引
3. **性能配置** - 调整缓存大小和同步模式以平衡性能和数据安全

## 配置说明

插件配置项位于 AstrBot 的主配置文件中，可以配置以下参数：

- `base_exp_gain` - 基础修炼获得的修为点数
- `closed_door_duration` - 闭关修炼持续时间（秒）
- `closed_door_cooldown` - 闭关修炼冷却时间（秒）
- `deep_closed_door_duration` - 深度闭关时长（秒）
- `deep_closed_door_cooldown` - 深度闭关冷却时间（秒）
- `initial_realm` - 检测灵根后的初始境界
- `battle_cooldown` - 斗法冷却时间（秒）
- `default_sects` - 默认宗门列表

## 开发说明

插件遵循 AstrBot 插件开发规范，采用分层架构设计：

- **handler 层** - 处理用户命令请求
- **service 层** - 实现业务逻辑
- **repository 层** - 数据访问层
- **domain 层** - 领域模型

数据库使用 SQLite 并启用了 WAL 模式以提高并发性能。